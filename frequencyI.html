<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Violation Frequency</title>

<script src="site_libs/header-attrs-2.11/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<script src="site_libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<script src="site_libs/plotly-binding-4.10.0/plotly.js"></script>
<script src="site_libs/typedarray-0.1/typedarray.min.js"></script>
<link href="site_libs/crosstalk-1.1.1/css/crosstalk.css" rel="stylesheet" />
<script src="site_libs/crosstalk-1.1.1/js/crosstalk.min.js"></script>
<link href="site_libs/plotly-htmlwidgets-css-2.5.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="site_libs/plotly-main-2.5.1/plotly-latest.min.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>








<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}


</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Home</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Exploratory Analyses
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="frequencyI.html">Violation Frequency</a>
    </li>
    <li>
      <a href="timeline-part.html">Violation Timeline</a>
    </li>
    <li>
      <a href="fine_amount.html">Fine Amount</a>
    </li>
    <li>
      <a href="vehicle.html">Violation by Vehicle types</a>
    </li>
  </ul>
</li>
<li>
  <a href="statistical-analysis.html">Statistical Analyses</a>
</li>
<li>
  <a href="hydrant_mapping.html">Hydrant Mapping</a>
</li>
<li>
  <a href="final_report.html">Project Report</a>
</li>
<li>
  <a href="references.html">References</a>
</li>
<li>
  <a href="https://github.com/sarahyanwang/parking_violation.github.io">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Violation Frequency</h1>

</div>


<div id="distribution-of-parking-violation" class="section level2">
<h2>Distribution of parking violation</h2>
<p>We first Distribution of number of parking violation in five boroughs (Manhattan, Kings, Bronx, Queens, and Staten Island). This bar graph shows the frequency of tickets in five boroughs in 2021. Brooklyn has the greatest number of tickets among five boroughs. Staten Island has the lowest number of tickets in 2021.</p>
<pre class="r"><code>violation1 = read_csv(&quot;./Open_Parking_and_Camera_Violations.csv&quot;) %&gt;% 
  janitor::clean_names() %&gt;%
  rename(borough = county) %&gt;%  # rename county to borough
  mutate(
    borough = case_when(
      borough %in% c(&quot;BK&quot;,&quot;K&quot;, &quot;Kings&quot;) ~ &quot;Brooklyn&quot;,
      borough %in% c(&quot;BX&quot;, &quot;Bronx&quot;) ~ &quot;Bronx&quot;,
      borough %in% c(&quot;Q&quot;, &quot;QN&quot;, &quot;Qns&quot;) ~ &quot;Queens&quot;,
      borough %in% c(&quot;ST&quot;, &quot;R&quot;, &quot;Rich&quot;, &quot;RICH&quot;) ~ &quot;Staten Island&quot;,
      borough %in% c(&quot;NY&quot;, &quot;MN&quot;) ~ &quot;Manhattan&quot;),
      issue_date = as.Date(issue_date, format = &quot;%m/%d/%y&quot;),
      weekday = weekdays(issue_date),
      year = year(issue_date),
      month = month(issue_date),
      day = day(issue_date)
    )  %&gt;%  # make the borough the same 
  filter(borough != &quot;A&quot;,                  # get rid of &quot;A&quot;
         weekday != &quot;NA&quot;,
         month != &quot;11&quot;,
         month != &quot;12&quot;)  # remove data that cannot turn into weekday

violation1 %&gt;% 
  count(borough) %&gt;% 
  mutate(
    borough = fct_reorder(borough, n)) %&gt;% 
  plot_ly(x = ~borough, y = ~n, color = ~borough, type = &quot;bar&quot;, colors = &quot;viridis&quot;) %&gt;% 
  layout(title = &quot;Frequency of Tickets in Boroughs in 2021&quot;,
         xaxis = list(title = &quot;Borough&quot;),
         yaxis = list(title = &quot;Number of Tickets&quot;))</code></pre>
<div id="htmlwidget-ee1398629b7740313147" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-ee1398629b7740313147">{"x":{"visdat":{"793c22525e42":["function () ","plotlyVisDat"]},"cur_data":"793c22525e42","attrs":{"793c22525e42":{"x":{},"y":{},"color":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Frequency of Tickets in Boroughs in 2021","xaxis":{"domain":[0,1],"automargin":true,"title":"Borough","type":"category","categoryorder":"array","categoryarray":["Staten Island","Bronx","Manhattan","Queens","Brooklyn"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Tickets"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Staten Island"],"y":[56167],"type":"bar","name":"Staten Island","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Bronx"],"y":[302336],"type":"bar","name":"Bronx","marker":{"color":"rgba(59,82,139,1)","line":{"color":"rgba(59,82,139,1)"}},"textfont":{"color":"rgba(59,82,139,1)"},"error_y":{"color":"rgba(59,82,139,1)"},"error_x":{"color":"rgba(59,82,139,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Manhattan"],"y":[431647],"type":"bar","name":"Manhattan","marker":{"color":"rgba(33,144,141,1)","line":{"color":"rgba(33,144,141,1)"}},"textfont":{"color":"rgba(33,144,141,1)"},"error_y":{"color":"rgba(33,144,141,1)"},"error_x":{"color":"rgba(33,144,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Queens"],"y":[450335],"type":"bar","name":"Queens","marker":{"color":"rgba(93,200,99,1)","line":{"color":"rgba(93,200,99,1)"}},"textfont":{"color":"rgba(93,200,99,1)"},"error_y":{"color":"rgba(93,200,99,1)"},"error_x":{"color":"rgba(93,200,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Brooklyn"],"y":[493221],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
<p>The bar graph further break down the number of tickets in five borough from January to October in 2021. There is sharp increasing of number of tickets in October. The distribution of number of tickets are similar from January to October across Borough. Brooklyn has the highest number of tickets, while State Island has the least number of tickets. There is large increase in number of tickets in October in all boroughs except Staten Island.</p>
<pre class="r"><code>violation1 %&gt;% 
  group_by(borough) %&gt;%
  count(month) %&gt;% 
  mutate(month = month.abb[as.numeric(month)],
         month = fct_relevel(month, c(&quot;Jan&quot;, &quot;Feb&quot;, &quot;Mar&quot;, &quot;Apr&quot;,&quot;May&quot;,&quot;Jun&quot;, &quot;Jul&quot;, &quot;Aug&quot;, &quot;Sep&quot;, &quot;Oct&quot;))) %&gt;% 
      plot_ly(x = ~month, y = ~n, color = ~borough, type = &quot;bar&quot;, colors = &quot;viridis&quot;)%&gt;%
  layout(title = &quot;Frequency of Tickets in Boroughs in 2021&quot;,
         xaxis = list(title = &quot;Borough&quot;),
         yaxis = list(title = &quot;Number of Tickets in Each Month in 2021&quot;))</code></pre>
<div id="htmlwidget-394561bdc087227da0d0" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-394561bdc087227da0d0">{"x":{"visdat":{"793c37515ad":["function () ","plotlyVisDat"]},"cur_data":"793c37515ad","attrs":{"793c37515ad":{"x":{},"y":{},"color":{},"colors":"viridis","alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"Frequency of Tickets in Boroughs in 2021","xaxis":{"domain":[0,1],"automargin":true,"title":"Borough","type":"category","categoryorder":"array","categoryarray":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Tickets in Each Month in 2021"},"hovermode":"closest","showlegend":true},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],"y":[27904,14840,30854,26652,27633,33376,31062,34522,30505,44988],"type":"bar","name":"Bronx","marker":{"color":"rgba(68,1,84,1)","line":{"color":"rgba(68,1,84,1)"}},"textfont":{"color":"rgba(68,1,84,1)"},"error_y":{"color":"rgba(68,1,84,1)"},"error_x":{"color":"rgba(68,1,84,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],"y":[50003,22925,50810,47080,47815,54136,50359,53939,44032,72122],"type":"bar","name":"Brooklyn","marker":{"color":"rgba(59,82,139,1)","line":{"color":"rgba(59,82,139,1)"}},"textfont":{"color":"rgba(59,82,139,1)"},"error_y":{"color":"rgba(59,82,139,1)"},"error_x":{"color":"rgba(59,82,139,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],"y":[39833,21816,44239,34218,34860,45134,45067,50156,46072,70252],"type":"bar","name":"Manhattan","marker":{"color":"rgba(33,144,141,1)","line":{"color":"rgba(33,144,141,1)"}},"textfont":{"color":"rgba(33,144,141,1)"},"error_y":{"color":"rgba(33,144,141,1)"},"error_x":{"color":"rgba(33,144,141,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],"y":[42178,23245,46541,37775,37688,49976,48563,51836,43796,68737],"type":"bar","name":"Queens","marker":{"color":"rgba(93,200,99,1)","line":{"color":"rgba(93,200,99,1)"}},"textfont":{"color":"rgba(93,200,99,1)"},"error_y":{"color":"rgba(93,200,99,1)"},"error_x":{"color":"rgba(93,200,99,1)"},"xaxis":"x","yaxis":"y","frame":null},{"x":["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct"],"y":[5785,2904,5104,5895,5450,6029,5897,6040,5805,7258],"type":"bar","name":"Staten Island","marker":{"color":"rgba(253,231,37,1)","line":{"color":"rgba(253,231,37,1)"}},"textfont":{"color":"rgba(253,231,37,1)"},"error_y":{"color":"rgba(253,231,37,1)"},"error_x":{"color":"rgba(253,231,37,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="top-10-violations-in-nyc-in-2021" class="section level2">
<h2>Top 10 violations in NYC in 2021</h2>
<p>We want to know the most common ten violation types based on the total frequency in NYC in 2021.</p>
<pre class="r"><code>total_violation = violation1 %&gt;% 
  count(violation) %&gt;% 
  mutate(
    violation = fct_reorder(violation, n),
    ranking = min_rank(desc(n))
  ) %&gt;% 
  filter(ranking &lt;= 10) %&gt;% 
  arrange(n)

total_violation %&gt;% 
  plot_ly(x = ~violation, y = ~n, type = &quot;bar&quot;) %&gt;% 
  layout(title = &quot;10 Most Common Violations in Total in NYC in 2021&quot;,
         xaxis = list(title = &quot;Violation&quot;),
         yaxis = list(title = &quot;Number of Tickets in Total&quot;))</code></pre>
<div id="htmlwidget-156516e4484838a1020c" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-156516e4484838a1020c">{"x":{"visdat":{"793c7d6b4511":["function () ","plotlyVisDat"]},"cur_data":"793c7d6b4511","attrs":{"793c7d6b4511":{"x":{},"y":{},"alpha_stroke":1,"sizes":[10,100],"spans":[1,20],"type":"bar"}},"layout":{"margin":{"b":40,"l":60,"t":25,"r":10},"title":"10 Most Common Violations in Total in NYC in 2021","xaxis":{"domain":[0,1],"automargin":true,"title":"Violation","type":"category","categoryorder":"array","categoryarray":["ANGLE PARKING-COMM VEHICLE","FAIL TO DISP. MUNI METER RECPT","MISCELLANEOUS","NO STANDING-OFF-STREET LOT","PKG IN EXC. OF LIM-COMM MTR ZN","ALTERING INTERCITY BUS PERMIT","NO STOP/STANDNG EXCEPT PAS P/U","OT PARKING-MISSING/BROKEN METR","REMOVE/REPLACE FLAT TIRE","EXPIRED METER","FAILURE TO DISPLAY BUS PERMIT","MARGINAL STREET/WATER FRONT","NO OPERATOR NAM/ADD/PH DISPLAY","OVERNIGHT TRACTOR TRAILER PKG","VACANT LOT","VEH-SALE/WSHNG/RPRNG/DRIVEWAY","ELEVATED/DIVIDED HIGHWAY/TUNNL","WASH/REPAIR VEHCL-REPAIR ONLY","NO STD(EXC TRKS/GMTDST NO-TRK)","TUNNEL/ELEVATED/ROADWAY","STORAGE-3HR COMMERCIAL","NO PARKING-TAXI STAND","PARKED BUS-EXC. DESIG. AREA","RAILROAD CROSSING","IDLING","DETACHED TRAILER","UNAUTHORIZED BUS LAYOVER","VEHICLE FOR SALE(DEALERS ONLY)","NGHT PKG ON RESID STR-COMM VEH","EXCAVATION-VEHICLE OBSTR TRAFF","NO STANDING-COMMUTER VAN STOP","DIVIDED HIGHWAY","NO STANDING-FOR HIRE VEH STOP","DOUBLE PARKING-MIDTOWN COMML","MISSING EQUIPMENT","BUS PARKING IN LOWER MANHATTAN","TRAFFIC LANE","NO PARKING-EXC. AUTH. VEHICLE","INTERSECTION","NIGHTTIME STD/ PKG IN A PARK","OVERTIME PKG-TIME LIMIT POSTED","OTHER","OBSTRUCTING TRAFFIC/INTERSECT","NO STANDING-HOTEL LOADING","UNALTERED COMM VEHICLE","NO STANDING EXCP D/S","NO PARKING-EXC. HNDICAP PERMIT","VIN OBSCURED","BEYOND MARKED SPACE","WRONG WAY","NO PARKING-EXC. HOTEL LOADING","ANGLE PARKING","NO STANDING-SNOW EMERGENCY","PEDESTRIAN RAMP","IMPROPER REGISTRATION","REG STICKER-MUTILATED/C'FEIT","NO STANDING-TAXI STAND","FEEDING METER","NO STANDING-BUS LANE","NO STOPPING-DAY/TIME LIMITS","NON-COMPLIANCE W/ POSTED SIGN","INSP STICKER-MUTILATED/C'FEIT","BIKE LANE","FAILURE TO STOP AT RED LIGHT","SAFETY ZONE","SIDEWALK","NO MATCH-PLATE/STICKER","OBSTRUCTING DRIVEWAY","BUS LANE VIOLATION","CROSSWALK","NO STANDING-EXC. AUTH. VEHICLE","NO STANDING-EXC. TRUCK LOADING","NO STANDING-BUS STOP","NO STANDING-COMM METER ZONE","PHTO SCHOOL ZN SPEED VIOLATION","EXPIRED MUNI METER","DOUBLE PARKING","FRONT OR BACK PLATE MISSING","NO PARKING-DAY/TIME LIMITS","NO STANDING-DAY/TIME LIMITS","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","FAIL TO DSPLY MUNI METER RECPT","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"]},"yaxis":{"domain":[0,1],"automargin":true,"title":"Number of Tickets in Total"},"hovermode":"closest","showlegend":false},"source":"A","config":{"modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"data":[{"x":["EXPIRED MUNI METER","DOUBLE PARKING","FRONT OR BACK PLATE MISSING","NO PARKING-DAY/TIME LIMITS","NO STANDING-DAY/TIME LIMITS","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","FAIL TO DSPLY MUNI METER RECPT","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"y":[48336,50035,91896,98269,114554,141660,191809,202046,230059,253126],"type":"bar","marker":{"color":"rgba(31,119,180,1)","line":{"color":"rgba(31,119,180,1)"}},"error_y":{"color":"rgba(31,119,180,1)"},"error_x":{"color":"rgba(31,119,180,1)"},"xaxis":"x","yaxis":"y","frame":null}],"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="common-violation-types-in-five-boroughs" class="section level2 tabset">
<h2 class="tabset">5 common violation types in five boroughs</h2>
<p>We want to find the top five common violation types in each borough, and see whether there exists difference among boroughs. We found that the most common 5 reasons of getting a violation tickets in NYC among all five boroughs are: 1) No parking-street cleaning, 2) Failure to display a muni-meter receipt, 3) Inspection sticker-expired/missing, 4) Registration sticker-expired /missing, and 5) Fire hydrant.</p>
<pre class="r"><code>## top 5 reasons of violation tickets
violation_type = violation1 %&gt;% 
  group_by(borough) %&gt;% 
  count(violation) %&gt;% 
  mutate(
    violation = fct_reorder(violation, n),
    index = min_rank(desc(n))) %&gt;% 
  filter(index &lt;= 5) </code></pre>
<div id="bronx" class="section level3">
<h3>Bronx</h3>
<pre class="r"><code>bronx_vio_type = 
  violation_type %&gt;% 
  filter(borough == &quot;Bronx&quot;) %&gt;% 
  ggplot(aes(x = violation, y = n, fill = violation)) + 
  geom_bar(stat = &quot;identity&quot;) + 
  labs(
    title = &quot;Frequency of Violation Type in Bronx in 2021&quot;, 
    x = &quot;Violation Type&quot;, 
    y = &quot;Number of tickets&quot;) +
  theme(
    axis.text.x = element_text(angle = 60, vjust = .5, hjust = 1),
    legend.text = element_text(size = 5)
  )

ggplotly(bronx_vio_type)</code></pre>
<div id="htmlwidget-5d33be41bb40865eb0fa" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5d33be41bb40865eb0fa">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[24005],"text":"violation: FAIL TO DSPLY MUNI METER RECPT<br />n: 24005<br />violation: FAIL TO DSPLY MUNI METER RECPT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FAIL TO DSPLY MUNI METER RECPT","legendgroup":"FAIL TO DSPLY MUNI METER RECPT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[32407],"text":"violation: FIRE HYDRANT<br />n: 32407<br />violation: FIRE HYDRANT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FIRE HYDRANT","legendgroup":"FIRE HYDRANT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[35410],"text":"violation: REG. STICKER-EXPIRED/MISSING<br />n: 35410<br />violation: REG. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"REG. STICKER-EXPIRED/MISSING","legendgroup":"REG. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[44436],"text":"violation: INSP. STICKER-EXPIRED/MISSING<br />n: 44436<br />violation: INSP. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"INSP. STICKER-EXPIRED/MISSING","legendgroup":"INSP. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[46874],"text":"violation: NO PARKING-STREET CLEANING<br />n: 46874<br />violation: NO PARKING-STREET CLEANING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO PARKING-STREET CLEANING","legendgroup":"NO PARKING-STREET CLEANING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.9764777864645,"r":7.30593607305936,"b":55.8139383945088,"l":54.7945205479452},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of Violation Type in Bronx in 2021","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-60,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Violation Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2343.7,49217.7],"tickmode":"array","ticktext":["0","10000","20000","30000","40000"],"tickvals":[0,10000,20000,30000,40000],"categoryorder":"array","categoryarray":["0","10000","20000","30000","40000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Number of tickets","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":6.6417600664176},"title":{"text":"violation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"793c45b06535":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"793c45b06535","visdat":{"793c45b06535":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="brooklyn" class="section level3">
<h3>Brooklyn</h3>
<pre class="r"><code>brooklyn_vio_type = 
  violation_type %&gt;% 
  filter(borough == &quot;Brooklyn&quot;) %&gt;% 
  ggplot(aes(x = violation, y = n, fill = violation)) + 
  geom_bar(stat = &quot;identity&quot;) + 
  labs(
    title = &quot;Frequency of Violation Type in Brooklyn in 2021&quot;, 
    x = &quot;Violation Type&quot;, 
    y = &quot;Number of tickets&quot;) +
  theme(
    axis.text.x = element_text(angle = 60, vjust = .5, hjust = 1),
    legend.text = element_text(size = 5)
  )

ggplotly(brooklyn_vio_type)</code></pre>
<div id="htmlwidget-5b60d8d7e867822e04f3" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-5b60d8d7e867822e04f3">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[49347],"text":"violation: FAIL TO DSPLY MUNI METER RECPT<br />n:  49347<br />violation: FAIL TO DSPLY MUNI METER RECPT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FAIL TO DSPLY MUNI METER RECPT","legendgroup":"FAIL TO DSPLY MUNI METER RECPT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[43903],"text":"violation: FIRE HYDRANT<br />n:  43903<br />violation: FIRE HYDRANT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FIRE HYDRANT","legendgroup":"FIRE HYDRANT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[51038],"text":"violation: REG. STICKER-EXPIRED/MISSING<br />n:  51038<br />violation: REG. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"REG. STICKER-EXPIRED/MISSING","legendgroup":"REG. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[67654],"text":"violation: INSP. STICKER-EXPIRED/MISSING<br />n:  67654<br />violation: INSP. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"INSP. STICKER-EXPIRED/MISSING","legendgroup":"INSP. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[101494],"text":"violation: NO PARKING-STREET CLEANING<br />n: 101494<br />violation: NO PARKING-STREET CLEANING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO PARKING-STREET CLEANING","legendgroup":"NO PARKING-STREET CLEANING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.9764777864645,"r":7.30593607305936,"b":55.8139383945088,"l":60.6392694063927},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of Violation Type in Brooklyn in 2021","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-60,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Violation Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-5074.7,106568.7],"tickmode":"array","ticktext":["0","25000","50000","75000","100000"],"tickvals":[0,25000,50000,75000,100000],"categoryorder":"array","categoryarray":["0","25000","50000","75000","100000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Number of tickets","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":6.6417600664176},"title":{"text":"violation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"793c5b666e55":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"793c5b666e55","visdat":{"793c5b666e55":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="manhattan" class="section level3">
<h3>Manhattan</h3>
<pre class="r"><code>manhattan_vio_type = 
  violation_type %&gt;% 
  filter(borough == &quot;Manhattan&quot;) %&gt;% 
  ggplot(aes(x = violation, y = n, fill = violation)) + 
  geom_bar(stat = &quot;identity&quot;) + 
  labs(
    title = &quot;Frequency of Violation Type in Manhattan in 2021&quot;, 
    x = &quot;Violation Type&quot;, 
    y = &quot;Number of tickets&quot;) +
  theme(
    axis.text.x = element_text(angle = 60, vjust = .5, hjust = 1),
    legend.text = element_text(size = 5)
  )

ggplotly(manhattan_vio_type)</code></pre>
<div id="htmlwidget-1fd7e7cd3c1354c73ec0" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-1fd7e7cd3c1354c73ec0">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[35712],"text":"violation: NO STANDING-COMM METER ZONE<br />n: 35712<br />violation: NO STANDING-COMM METER ZONE","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO STANDING-COMM METER ZONE","legendgroup":"NO STANDING-COMM METER ZONE","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[35638],"text":"violation: NO STANDING-DAY/TIME LIMITS<br />n: 35638<br />violation: NO STANDING-DAY/TIME LIMITS","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO STANDING-DAY/TIME LIMITS","legendgroup":"NO STANDING-DAY/TIME LIMITS","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[49902],"text":"violation: FAIL TO DSPLY MUNI METER RECPT<br />n: 49902<br />violation: FAIL TO DSPLY MUNI METER RECPT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FAIL TO DSPLY MUNI METER RECPT","legendgroup":"FAIL TO DSPLY MUNI METER RECPT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[40856],"text":"violation: INSP. STICKER-EXPIRED/MISSING<br />n: 40856<br />violation: INSP. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"INSP. STICKER-EXPIRED/MISSING","legendgroup":"INSP. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[43963],"text":"violation: NO PARKING-STREET CLEANING<br />n: 43963<br />violation: NO PARKING-STREET CLEANING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO PARKING-STREET CLEANING","legendgroup":"NO PARKING-STREET CLEANING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.9764777864645,"r":7.30593607305936,"b":55.8139383945088,"l":54.7945205479452},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of Violation Type in Manhattan in 2021","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["NO STANDING-COMM METER ZONE","NO STANDING-DAY/TIME LIMITS","FAIL TO DSPLY MUNI METER RECPT","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["NO STANDING-COMM METER ZONE","NO STANDING-DAY/TIME LIMITS","FAIL TO DSPLY MUNI METER RECPT","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-60,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Violation Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-2495.1,52397.1],"tickmode":"array","ticktext":["0","10000","20000","30000","40000","50000"],"tickvals":[0,10000,20000,30000,40000,50000],"categoryorder":"array","categoryarray":["0","10000","20000","30000","40000","50000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Number of tickets","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":6.6417600664176},"title":{"text":"violation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"793c41dd6adc":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"793c41dd6adc","visdat":{"793c41dd6adc":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="queens" class="section level3">
<h3>Queens</h3>
<pre class="r"><code>queens_vio_type = 
  violation_type %&gt;% 
  filter(borough == &quot;Queens&quot;) %&gt;% 
  ggplot(aes(x = violation, y = n, fill = violation)) + 
  geom_bar(stat = &quot;identity&quot;) + 
  labs(
    title = &quot;Frequency of Violation Type in Queens in 2021&quot;, 
    x = &quot;Violation Type&quot;, 
    y = &quot;Number of tickets&quot;) +
  theme(
    axis.text.x = element_text(angle = 60, vjust = .5, hjust = 1),
    legend.text = element_text(size = 5)
  )

ggplotly(queens_vio_type)</code></pre>
<div id="htmlwidget-96c35a8a231386a42736" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-96c35a8a231386a42736">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[72767],"text":"violation: FAIL TO DSPLY MUNI METER RECPT<br />n: 72767<br />violation: FAIL TO DSPLY MUNI METER RECPT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FAIL TO DSPLY MUNI METER RECPT","legendgroup":"FAIL TO DSPLY MUNI METER RECPT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[31610],"text":"violation: FIRE HYDRANT<br />n: 31610<br />violation: FIRE HYDRANT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FIRE HYDRANT","legendgroup":"FIRE HYDRANT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[56589],"text":"violation: REG. STICKER-EXPIRED/MISSING<br />n: 56589<br />violation: REG. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"REG. STICKER-EXPIRED/MISSING","legendgroup":"REG. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[61256],"text":"violation: INSP. STICKER-EXPIRED/MISSING<br />n: 61256<br />violation: INSP. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"INSP. STICKER-EXPIRED/MISSING","legendgroup":"INSP. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[60779],"text":"violation: NO PARKING-STREET CLEANING<br />n: 60779<br />violation: NO PARKING-STREET CLEANING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"NO PARKING-STREET CLEANING","legendgroup":"NO PARKING-STREET CLEANING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.9764777864645,"r":7.30593607305936,"b":55.8139383945088,"l":54.7945205479452},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of Violation Type in Queens in 2021","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["FAIL TO DSPLY MUNI METER RECPT","FIRE HYDRANT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING","NO PARKING-STREET CLEANING"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-60,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Violation Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-3638.35,76405.35],"tickmode":"array","ticktext":["0","20000","40000","60000"],"tickvals":[4.54747350886464e-13,20000,40000,60000],"categoryorder":"array","categoryarray":["0","20000","40000","60000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Number of tickets","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":6.6417600664176},"title":{"text":"violation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"793c52722129":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"793c52722129","visdat":{"793c52722129":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
<div id="staten-island" class="section level3">
<h3>Staten Island</h3>
<pre class="r"><code>si_vio_type = 
  violation_type %&gt;% 
  filter(borough == &quot;Staten Island&quot;) %&gt;% 
  ggplot(aes(x = violation, y = n, fill = violation)) + 
  geom_bar(stat = &quot;identity&quot;) + 
  labs(
    title = &quot;Frequency of Violation Type in Staten Island in 2021&quot;, 
    x = &quot;Violation Type&quot;, 
    y = &quot;Number of tickets&quot;) +
  theme(
    axis.text.x = element_text(angle = 60, vjust = .5, hjust = 1),
    legend.text = element_text(size = 5)
  )

ggplotly(si_vio_type)</code></pre>
<div id="htmlwidget-82c8e3ce94c789f2bb5d" style="width:90%;height:403.2px;" class="plotly html-widget"></div>
<script type="application/json" data-for="htmlwidget-82c8e3ce94c789f2bb5d">{"x":{"data":[{"orientation":"v","width":0.9,"base":0,"x":[1],"y":[3164],"text":"violation: PHTO SCHOOL ZN SPEED VIOLATION<br />n:  3164<br />violation: PHTO SCHOOL ZN SPEED VIOLATION","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(68,1,84,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"PHTO SCHOOL ZN SPEED VIOLATION","legendgroup":"PHTO SCHOOL ZN SPEED VIOLATION","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[2],"y":[5637],"text":"violation: FRONT OR BACK PLATE MISSING<br />n:  5637<br />violation: FRONT OR BACK PLATE MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(59,82,139,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FRONT OR BACK PLATE MISSING","legendgroup":"FRONT OR BACK PLATE MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[3],"y":[6025],"text":"violation: FAIL TO DSPLY MUNI METER RECPT<br />n:  6025<br />violation: FAIL TO DSPLY MUNI METER RECPT","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(33,144,140,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"FAIL TO DSPLY MUNI METER RECPT","legendgroup":"FAIL TO DSPLY MUNI METER RECPT","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[4],"y":[13492],"text":"violation: REG. STICKER-EXPIRED/MISSING<br />n: 13492<br />violation: REG. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(93,200,99,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"REG. STICKER-EXPIRED/MISSING","legendgroup":"REG. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"orientation":"v","width":0.9,"base":0,"x":[5],"y":[15857],"text":"violation: INSP. STICKER-EXPIRED/MISSING<br />n: 15857<br />violation: INSP. STICKER-EXPIRED/MISSING","type":"bar","textposition":"none","marker":{"autocolorscale":false,"color":"rgba(253,231,37,1)","line":{"width":1.88976377952756,"color":"transparent"}},"name":"INSP. STICKER-EXPIRED/MISSING","legendgroup":"INSP. STICKER-EXPIRED/MISSING","showlegend":true,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":43.9764777864645,"r":7.30593607305936,"b":55.8139383945088,"l":54.7945205479452},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187},"title":{"text":"Frequency of Violation Type in Staten Island in 2021","font":{"color":"rgba(0,0,0,1)","family":"","size":17.5342465753425},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.4,5.6],"tickmode":"array","ticktext":["PHTO SCHOOL ZN SPEED VIOLATION","FRONT OR BACK PLATE MISSING","FAIL TO DSPLY MUNI METER RECPT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING"],"tickvals":[1,2,3,4,5],"categoryorder":"array","categoryarray":["PHTO SCHOOL ZN SPEED VIOLATION","FRONT OR BACK PLATE MISSING","FAIL TO DSPLY MUNI METER RECPT","REG. STICKER-EXPIRED/MISSING","INSP. STICKER-EXPIRED/MISSING"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-60,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"y","title":{"text":"Violation Type","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-792.85,16649.85],"tickmode":"array","ticktext":["0","5000","10000","15000"],"tickvals":[0,5000,10000,15000],"categoryorder":"array","categoryarray":["0","5000","10000","15000"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.65296803652968,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.689497716895},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(235,235,235,1)","gridwidth":0.66417600664176,"zeroline":false,"anchor":"x","title":{"text":"Number of tickets","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":true,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":6.6417600664176},"title":{"text":"violation","font":{"color":"rgba(0,0,0,1)","family":"","size":14.6118721461187}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"793c3007473":{"x":{},"y":{},"fill":{},"type":"bar"}},"cur_data":"793c3007473","visdat":{"793c3007473":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.2,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = true;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
